window.devInfSandbar=window.devInfSandbar||{};
(function(b){b.util={};b.util.validateAndCopy=function(d,e,k,n){if(d[k]){var t=typeof d[k];n||"function"!==t&&"object"!==t?n&&n.exec(d[k])?e[k]=d[k]:window&&window.console&&window.console.log("invalid property "+k+" ignored:"+d[k]):e[k]=d[k]}};b.util.beautifiedStatus=function(d){d=d.replace(/_/g," ");return d.substring(0,1).toUpperCase()+d.substring(1).toLowerCase()};b.util.twoDigitPadded=function(d){d+="";return 1==d.length?"0"+d:d};b.util.formattedDate=function(d){var e=b.util.twoDigitPadded;return d.getFullYear()+
"/"+e(d.getMonth()+1)+"/"+e(d.getDate())+" "+e(d.getHours())+":"+e(d.getMinutes())+" ("+d.toString().split("(").pop()};b.xhr={};b.xhr.fireCrossDomainRequest=function(d,e,k){var n=document.createElement("img");n.addEventListener("load",function(){n.parentNode.removeChild(n);e&&e()},!1);n.addEventListener("error",function(){n.parentNode.removeChild(n);k&&k()},!1);n.src=d;n.style.display="none";document.body.appendChild(n)};b.xhr.logEvent=function(d,e,k){var n="https://belt.corp.google.com/l.gif?msg=";
n+=encodeURIComponent(d);e&&(n+="&detail="+encodeURIComponent(e));for(var t in k)k.hasOwnProperty(t)&&k[t]&&(n+="&"+encodeURIComponent(t)+"="+encodeURIComponent(k[t]));b.xhr.fireCrossDomainRequest(n)};b.xhr.getWithCredentials=function(d,e,k){var n=new XMLHttpRequest;n.withCredentials=!0;n.open("GET",d,!0);n.onerror=function(){k(n)};n.onload=function(){4===n.readyState&&(!n.status||200>n.status||299<n.status?k(n):e(n))};n.send()};b.xhr.getJSONWithCredentials=function(d,e,k){b.xhr.getWithCredentials(d,
function(n){n=window.JSON.parse(n.responseText.substring(5));e(n)},k)}})(window.devInfSandbar);window.devInfSandbar=window.devInfSandbar||{};
(function(b){b.ui={};b.ui.DATA_NOT_AVAILABLE="Could not retrieve data";b.ui.TEAMS_URL="https://teams-service.googleplex.com/";b.ui.STATIC_IMAGE_URL="https://static.corp.google.com/moma/favicon_2.png";b.ui.SANDBAR_URL="https://sandbar-backend.corp.google.com/";b.ui.sandbarBackendInitialized=!1;b.ui.wrapElement=function(d){return{child:function(e,k,n){e=b.ui.createElement(e,k,n);d.appendChild(e.domObject());return e},insertChild:function(e,k,n){e=b.ui.createElement(e,k,n);d.insertBefore(e.domObject(),
d.firstChild);return e},children:function(e){for(var k=0;k<e.length;k++)d.appendChild(e[k].domObject());return this},setText:function(e){for(;d.firstChild;)d.removeChild(d.firstChild);d.appendChild(document.createTextNode(e))},domObject:function(){return d}}};b.ui.createElement=function(d,e,k){d=document.createElement(d);for(var n in e)if(e.hasOwnProperty(n))if("style"===n){var t=e[n],u;for(u in t)t.hasOwnProperty(u)&&(-1!==u.indexOf("-")?d.style.setProperty(u,t[u],""):d.style[u]=t[u])}else void 0!==
e[n]&&(d[n]=e[n]);k&&d.appendChild(document.createTextNode(k));return b.ui.wrapElement(d)};b.ui.fillLdapHover=function(d,e,k){function n(){b.xhr.getJSONWithCredentials(b.ui.SANDBAR_URL+"/v1/user/"+u,function(r){m.child("a",{href:"mailto:"+E},E);if(r){var g=r.name;if(g){var v=c,f=v.child,z={target:"_blank",href:"http://who/"+u},A=g.givenName;g.familyName&&"."!=g.familyName&&(A+=" "+g.familyName);g=A;f.call(v,"a",z,g)}r.title&&(v=r.title,(f=r.personType)&&"EMPLOYEE"!==f&&(v+=" ("+r.personType.toLowerCase()+
")"),r.costCenter&&(v+=", "+r.costCenter),l.setText(v));r.physicalLocation&&(f=r.physicalLocation,"REMOTE"===f.code?q.setText("Undisclosed Location"):(z=f.code.split("-"),v=z.slice(0,z.length-2).join("-"),f.city&&(v+=": "+f.city+", "+z[0]),f={target:"_blank",href:"http://map.googleplex.com?q="+f.code},q.child("a",f,v)));r=r.employmentStatus;"ACTIVE"===r?(w.child("a",{target:"_blank",href:"https://teams.googleplex.com/"+u},"Teams"),w.child("span",{}," | "),w.child("a",{target:"_blank",href:"https://www.google.com/calendar/embed?src="+
E+"&mode=WEEK&showCalendars=0"},"Calendar")):w.child("a",{target:"_blank",href:"https://epitaphs.googleplex.com/"+u},"Epitaph");w.child("span",{}," | ");w.child("a",{target:"_blank",href:"https://critique.corp.google.com/"+u},"CLs");"ACTIVE"===r&&(w.child("span",{}," | "),w.child("a",{target:"_blank",href:"https://icanread.googleplex.com/s/"+u},"Readability"))}},function(){m.child("a",{href:"mailto:"+E},E);w.child("a",{target:"_blank",href:"https://teams.googleplex.com/"+u},"Teams");w.child("span",
{}," | ");w.child("a",{target:"_blank",href:"https://epitaphs.googleplex.com/"+u},"Epitaph");w.child("span",{}," | ");w.child("a",{target:"_blank",href:"https://groups.google.com/a/google.com/forum/#!forum/"+u},"Groups");c.setText(b.ui.DATA_NOT_AVAILABLE)})}var t=(e||"").match(/([^@]+)@[^@]+/);if(t){var u=t[1];var E=t[0]}else u=e,E=u+"@google.com";d.className="corpeng-hover-kd-hovercontent-flex";t=b.ui.wrapElement(d);e=t.child("div",{className:"corpeng-hover-kd-hovercontent-flexleft"});d=t.child("div",
{className:"corpeng-hover-kd-hovercontent-flexmiddle"});t=t.child("div",{className:"corpeng-hover-kd-hovercontent-flexright"});if(k&&k.length){var a=e.child("div",{className:"corpeng-hover-kd-actions"});k.forEach(function(r){var g=a.child("div",{className:"corpeng-hover-kd-action"},r.title);g.domObject().addEventListener("click",function(){r.callback()})})}k=b.ui.TEAMS_URL+"photos/"+u;t.child("div",{className:"corpeng-hover-kd-image",style:{"background-image":'url("'+k+'")'}});var c=d.child("div",
{className:"corpeng-hover-kd-bubbleTitle"}),l=d.child("div",{className:"corpeng-hover-kd-detail"}),m=d.child("div",{className:"corpeng-hover-kd-email"}),q=d.child("div",{className:"corpeng-hover-kd-location"}),w=d.child("div",{className:"corpeng-hover-kd-links"});b.ui.sandbarBackendInitialized?n():b.xhr.fireCrossDomainRequest(b.ui.SANDBAR_URL+"/pixel.png",function(){b.ui.sandbarBackendInitialized=!0;n()},function(){window.console.log("Unable to get the Sandbar SSO.")})};b.ui.fillCLHover=function(d,
e){function k(){t.child("div",{},"CL "+e);u.setText(b.ui.DATA_NOT_AVAILABLE)}function n(){b.xhr.getJSONWithCredentials(b.ui.SANDBAR_URL+"/v1/changes/"+e,function(m){if(m.change){m=m.change;u.child("a",{target:"_blank",href:"https://cr.corp.google.com/"+e},m.description.text);var q=m.status||"unknown CL status";q=q.replace(/status/gi,"").trim();if(m.createTimeMicros){var w=new Date(m.createTimeMicros/1E3);q+=" "+b.util.formattedDate(w)}E.setText(b.util.beautifiedStatus(q));a.setText("Author: "+m.userName);
if(m.description.tags)for(q=m.description.tags,w=0;w<q.length;w++){var r=q[w];if("R"===r.key){q=r.value;q=q.replace(/,/g,", ");c.setText("Reviewers: "+q);break}}l.setText("Affected files: "+m.sourceFiles.length)}else window.console.log("Unexpected response from Sandbar server: "),window.console.log(m),k();m=t.child("div",{className:"corpeng-hover-kd-links"});m.child("a",{target:"_blank",href:"https://cr.corp.google.com/"+e},"Critique");m.child("span",{}," | ");m.child("a",{target:"_blank",href:"http://test.corp.google.com/ui#cl="+
e},"Continuous build results")},k)}var t=b.ui.wrapElement(d),u=t.child("div",{className:"corpeng-hover-kd-bubbleTitle"}),E=t.child("div",{className:"corpeng-hover-kd-detail"}),a=t.child("div",{}),c=t.child("div",{}),l=t.child("div",{});b.ui.sandbarBackendInitialized?n():b.xhr.fireCrossDomainRequest(b.ui.SANDBAR_URL+"/pixel.png",function(){b.ui.sandbarBackendInitialized=!0;n()},function(){window.console.log("Unable to get the Sandbar SSO.")})};b.ui.fillIssueHover=function(d,e){function k(){t.child("div",
{},"Issue "+e);u.setText(b.ui.DATA_NOT_AVAILABLE)}function n(){b.xhr.getJSONWithCredentials(b.ui.SANDBAR_URL+"/v1/issues/"+e,function(m){if(m.issue){m=m.issue[0];u.child("a",{target:"_blank",href:"http://b.corp.google.com/"+e},m.summary);E.setText(m.componentPath.join(" > "));var q=m.priority+"/"+m.severity+" "+b.util.beautifiedStatus(m.bugType).toLowerCase();a.setText(q);c.setText("Reporter: "+m.reporter);q=b.util.beautifiedStatus(m.status);"ASSIGNED"==m.status?q+=": "+m.assignee:"VERIFIED"==m.status||
"VERIFIER_ASSIGNED"==m.status?q+=": "+m.verifier:""!=m.assignee&&(q+=": "+m.assignee);l.setText(q)}else window.console.log("Unexpected response from Sandbar server:"),window.console.log(m),k();m=t.child("div",{className:"corpeng-hover-kd-links"});m.child("a",{target:"_blank",href:"https://b.corp.google.com/"+e},"Buganizer");m.child("span",{}," | ");m.child("a",{target:"_blank",href:"https://critique.corp.google.com/#search/&q=bug:"+e+"&type=cl"},"Related CLs")},k)}var t=b.ui.wrapElement(d),u=t.child("div",
{className:"corpeng-hover-kd-bubbleTitle"}),E=t.child("div",{className:"corpeng-hover-kd-detail"}),a=t.child("div",{}),c=t.child("div",{}),l=t.child("div",{});b.ui.sandbarBackendInitialized?n():b.xhr.fireCrossDomainRequest(b.ui.SANDBAR_URL+"/pixel.png",function(){b.ui.sandbarBackendInitialized=!0;n()},function(){window.console.log("Unable to get the Sandbar SSO.")})}})(window.devInfSandbar);window.corpeng=window.corpeng||{};
(function(b){b.hover={};b.hover.Side={LEFT:1,RIGHT:2,TOP:3,BOTTOM:4};b.hover.State={INACTIVE:1,ACTIVATING:2,ACTIVE:3,DEACTIVATING:4};b.hover.ACTIVATING_DELAY=500;b.hover.DEACTIVATING_DELAY=200;b.hover.REACTIVATING_DELAY=0;b.hover.UniqueScheduler=function(d){this.timer=d||window;this.scheduled_=null};b.hover.UniqueScheduler.prototype.setTimeout=function(d,e){this.scheduled_&&this.timer.clearTimeout(this.scheduled_);var k=this;this.scheduled_=this.timer.setTimeout(function(){k.scheduled_=null;d()},
e)};b.hover.UniqueScheduler.prototype.clearTimeout=function(){this.scheduled_&&this.timer.clearTimeout(this.scheduled_);this.scheduled_=null};b.hover.HovercardManager=function(){var d=function(k,n){n=n.getAttribute("person")||n.textContent;n=n.trim().replace(/@google.com$/,"");window.devInfSandbar.ui.fillLdapHover(k,n)};this.fillPopup=d;this.targetClass="corpeng-hover";this.activePopup=null;this.state=b.hover.State.INACTIVE;this.deactivatingTarget=this.activeTarget=this.activatingTarget=null;this.transitionScheduler=
new b.hover.UniqueScheduler;this.newTargetScheduler=new b.hover.UniqueScheduler;var e=this;this.mouseoverListener_=function(k){for(var n=k.target;n;){n===e.activePopup&&(n=e.activeTarget||e.deactivatingTarget);if(n&&n.classList&&n.classList.contains(e.targetClass)){e.newTargetScheduler.setTimeout(function(){e.newTarget(n)},0);return}n=n&&n.parentNode}e.newTargetScheduler.setTimeout(function(){e.clearTarget()},0)};this.mouseoutListener_=function(){e.newTargetScheduler.setTimeout(function(){e.clearTarget()},
0)}};b.hover.HovercardManager.prototype.setFillPopup=function(d){this.fillPopup=d};b.hover.HovercardManager.prototype.setTargetClass=function(d){this.targetClass=d};b.hover.HovercardManager.prototype.install=function(){document.body.addEventListener("mouseover",this.mouseoverListener_,!1);document.body.addEventListener("mouseout",this.mouseoutListener_,!1)};b.hover.HovercardManager.prototype.activate=function(d){if(d.parentNode){this.activePopup=document.createElement("div");this.activePopup.id="corpeng-hover-kd-bubble";
var e=document.createElement("div");e.className="corpeng-hover-kd-hovercontent";this.activePopup.appendChild(e);this.fillPopup(e,d);e=window.document.body;e.appendChild(this.activePopup);e=[b.hover.Side.RIGHT,b.hover.Side.TOP,b.hover.Side.LEFT,b.hover.Side.BOTTOM];for(var k=0;k<e.length&&(this.positionPopup(e[k],d),!this.isPopupContainedInPage());k++);this.isPopupContainedInPage()||this.positionPopup(b.hover.Side.RIGHT,d)}};b.hover.HovercardManager.prototype.isPopupContainedInPage=function(){var d=
this.activePopup,e=this.getOffset_(d,!0);return 0>e.left||e.left+d.offsetWidth>window.innerWidth||0>e.top||e.top+d.offsetHeight>window.innerHeight?!1:!0};b.hover.HovercardManager.prototype.positionPopup=function(d,e){var k=this.activePopup;k.style.top="auto";k.style.left="auto";k.style.right="auto";var n=e.offsetHeight,t=e.offsetWidth,u=this.getOffset_(e,!1);e=u.left;u=u.top;var E=window.document.body.offsetWidth;d===b.hover.Side.LEFT?(k.className="corpeng-hover-kd-bubble left",k.style.top=u-10+"px",
k.style.right=E-e+9+"px"):d===b.hover.Side.RIGHT?(k.className="corpeng-hover-kd-bubble right",k.style.top=u-10+"px",k.style.left=e+t+9+"px"):d===b.hover.Side.BOTTOM?(k.className="corpeng-hover-kd-bubble bottom",k.style.top=u+n+9+"px",k.style.left=e+"px"):d===b.hover.Side.TOP&&(k.className="corpeng-hover-kd-bubble top",k.style.top=u-(k.offsetHeight+9)+"px",k.style.left=e+"px")};b.hover.HovercardManager.prototype.deactivate=function(){this.activePopup&&(this.activePopup.parentNode.removeChild(this.activePopup),
this.activePopup=null)};b.hover.HovercardManager.prototype.scheduleTransition=function(d){var e=this;this.transitionScheduler.setTimeout(function(){switch(e.state){case b.hover.State.ACTIVATING:e.state=b.hover.State.ACTIVE;e.activeTarget=e.activatingTarget;e.activatingTarget=null;e.activate(e.activeTarget);break;case b.hover.State.DEACTIVATING:e.state=b.hover.State.INACTIVE;var k=e.deactivatingTarget;e.deactivatingTarget=null;e.deactivate(k)}},d)};b.hover.HovercardManager.prototype.newTarget=function(d){switch(this.state){case b.hover.State.INACTIVE:this.state=
b.hover.State.ACTIVATING;this.activatingTarget=d;this.scheduleTransition(b.hover.ACTIVATING_DELAY);break;case b.hover.State.ACTIVATING:d!==this.activatingTarget&&(this.activatingTarget=d,this.scheduleTransition(b.hover.ACTIVATING_DELAY));break;case b.hover.State.ACTIVE:d!==this.activeTarget&&(this.state=b.hover.State.ACTIVATING,this.activatingTarget=d,d=this.activeTarget,this.activeTarget=null,this.scheduleTransition(b.hover.REACTIVATING_DELAY),this.deactivate(d));break;case b.hover.State.DEACTIVATING:d===
this.deactivatingTarget?(this.state=b.hover.State.ACTIVE,this.activeTarget=this.deactivatingTarget,this.deactivatingTarget=null,this.transitionScheduler.clearTimeout()):(this.state=b.hover.State.ACTIVATING,this.activatingTarget=d,d=this.deactivatingTarget,this.deactivatingTarget=null,this.scheduleTransition(b.hover.REACTIVATING_DELAY),this.deactivate(d))}};b.hover.HovercardManager.prototype.clearTarget=function(){switch(this.state){case b.hover.State.ACTIVATING:this.state=b.hover.State.INACTIVE;this.activatingTarget=
null;this.transitionScheduler.clearTimeout();break;case b.hover.State.ACTIVE:this.state=b.hover.State.DEACTIVATING,this.deactivatingTarget=this.activeTarget,this.activeTarget=null,this.scheduleTransition(b.hover.DEACTIVATING_DELAY)}};b.hover.HovercardManager.prototype.getOffset_=function(d,e){for(var k=d.parentNode,n=d.offsetLeft,t=d.offsetTop;null!==k&&(e||k!==window.document.body);)n-=k.scrollLeft,t-=k.scrollTop,k=k.parentElement;for(k=d.offsetParent;null!==k&&(e||k!==window.document.body);)n+=
k.offsetLeft,t+=k.offsetTop,k=k.offsetParent;return{left:n,top:t}}})(window.corpeng);window.devInfSandbar=window.devInfSandbar||{};
(function(b){b.dom={};b.dom.childElements=function(a){var c=[];for(a=a.firstElementChild;null!==a;)c.push(a),a=a.nextElementSibling;return c};b.dom.childrenWithClass=function(a,c){var l=[];for(a=a.firstElementChild;null!==a;)-1!==a.className.indexOf(c)&&l.push(a),a=a.nextElementSibling;return l};b.dom.KDMenu=function(a,c){this.list=a;this.kind=c;this.button=a.parentElement;var l=this;this.button&&this.button.addEventListener("click",function(m){var q="A"===m.target.tagName;l.onButtonClick(!q||!m.target.href)},
!1);a=b.dom.childrenWithClass(this.list,"di-kd-menulistitem");for(c=0;c<a.length;c++)a[c].addEventListener("click",function(m){if(this.classList.contains("disabled"))return!1;l.onItemClick(this,l,"A"!==m.target.tagName)},!1)};b.dom.KDMenu.prototype.onButtonClick=function(a){if(this.button.classList.contains("selected"))return this.onClickOff(),!1;b.xhr.logEvent("onButtonClick",this.kind,window.devInfSandbar.currentContext_);for(var c=document.getElementsByClassName("di-kd-menulist"),l=0;l<c.length;l++)this.list!==
c[l]&&(c[l].classList.remove("shown"),c[l].parentNode.classList.remove("selected"));this.button.classList.add("selected");if(a){this.list.classList.add("shown");a=window.getComputedStyle(this.button,null).height;this.list.style.top=a;this.list.style.marginTop="1px";var m=this;window.setTimeout(function(){var q=function(){m.onClickOff();document.body.removeEventListener("click",q,!1)};document.body.addEventListener("click",q,!1)},0)}};b.dom.KDMenu.prototype.onClickOff=function(){this.list.classList.remove("shown");
this.button.classList.remove("selected")};b.dom.KDMenu.prototype.onItemClick=function(a,c,l){b.xhr.logEvent("onItemClick",c.kind+"_"+a.innerText,window.devInfSandbar.currentContext_);if(l)for(a=b.dom.childElements(a),c=0;c<a.length;c++)"A"===a[c].tagName&&("_blank"===a[c].target?window.open(a[c].href):document.location.href=a[c].href)};var d=function(a,c){var l=document.createElement("div");l=void 0!==l.style.caretColor;var m=b.optedIn_("queryHighlighting")&&a.onQueryHighlight,q=null,w="",r="";if(l&&
m){c.domObject().classList.add("di-kd-search-container");l=a.searchHelp?"calc(100% - 33px)":"100%";var g=c.child("div",{className:"di-kd-searchmirror-crop",style:{width:l}}),v=g.child("div",{className:"di-kd-searchmirror"});l=c.child("textarea",{className:"di-kd-searchbox",rows:1,wrap:"off",spellcheck:!1,style:{width:l},tabIndex:0,placeholder:a.searchPlaceholder||"Search",value:a.searchValue||""});var f=l.domObject(),z=c.domObject();f.addEventListener("focus",function(){z.classList.add("di-kd-focused")});
f.addEventListener("blur",function(){z.classList.remove("di-kd-focused")});var A=(window.requestAnimationFrame||window.webkitRequestAnimationFrame).bind(window),G=function(h,p){if(0==h.length)p.child("span",{className:"di-sq-placeholder"},a.searchPlaceholder||"Search");else{var x=0;m(h,{highlight:function(B,C,F){B<x||C<=B||C>h.length||(p.domObject().appendChild(document.createTextNode(h.slice(x,B))),p.child("span",{className:"di-sq-"+F},h.slice(B,C)),x=C)},setDefaultAutoCompletionText:function(B){w=
(B||"").replace(/[\n\r\t]/g," ")}});p.domObject().appendChild(document.createTextNode(h.slice(x)))}},D=v.domObject(),y=!1,H=void 0,I="",K=function(){if(H!==f.value){for(H=f.value;D.firstChild;)D.removeChild(D.firstChild);w=I="";G(H,v);r=w}if(I!==r){for(;D.lastChild&&D.lastChild.classList&&D.lastChild.classList.contains("di-sq-completion");)D.removeChild(D.lastChild);v.child("span",{className:"di-sq-completion"},r);I=r}D.style.transform="translate("+-f.scrollLeft+"px, 0px)";y=!1};q=function(){var h=
f.value.replace(/[\n\r\t]/g," ");h!=f.value&&(f.value=h);y||(A(K),y=!0)};f.addEventListener("input",q);f.addEventListener("scroll",q);q()}else l=c.child("input",{type:"text",className:"di-kd-searchbox",tabIndex:0,placeholder:a.searchPlaceholder||"Search",style:{width:"100%"},value:a.searchValue||""});g=c.child("ul",{className:"di-kd-menulist di-kd-suggestions"});l={_suggestionsElement:g.domObject(),_searchFieldElement:l.domObject(),_activeCompletion:null,deselect:function(){for(var h=b.dom.childElements(this._suggestionsElement),
p=0;p<h.length;p++)h[p].classList.remove("active");this._activeCompletion=null},setAutoCompletionFromSuggestion:function(h){if(h){if(r=h.dataset.completion){h=h.dataset.suffix;var p=this._searchFieldElement.value;-1===p.indexOf(h,p.length-h.length)&&(r=void 0)}this.setAutoCompletionText(r||"")}else this.removeAutoCompletionText()},getSearchText:function(){return this._searchFieldElement.value},setSearchText:function(h){this._searchFieldElement.value=h;q&&q();this.setCompletions([])},setAutoCompletionText:function(h){q&&
(r=(h||"").replace(/[\n\r\t]/g," "),q())},removeAutoCompletionText:function(){q&&(r=w,q())},onComplete:function(){if(!r||!q)return!1;var h=this._searchFieldElement;h.value+=r;r="";q();this.setCompletions([]);var p=h.value.length;h.setSelectionRange(p,p);return!0},hasSearchFocus:function(){var h=this._searchFieldElement;return document.activeElement===h},setSearchFocus:function(h){var p=this._searchFieldElement;p.focus();h&&p.setSelectionRange(0,p.value.length)},getInputElement:function(){return this._searchFieldElement},
onSearch:function(h){if(h){if(a.onSuggestionSelected){for(var p=h.parentElement,x=-1,B=0;B<p.children.length;B++)if(p.children[B]===h){x=B;break}window.setTimeout(function(){a.onSuggestionSelected(h.textContent,x)},1)}}else if(a.onSearch){var C=this;window.setTimeout(function(){a.onSearch(C._searchFieldElement.value)},1)}},createSuggestionElement:function(h,p){var x=h.child("div",{className:"di-kd-suggestionsIcon"});x.child("span",{className:p.iconClass||"di-kd-defaulticon"},"");x=h.child("div",{className:p.titleClass});
p.strikeOut&&(x=x.child("span",{style:{"text-decoration":"line-through"}}));var B=p.title,C=p.matchStart,F=p.matchEnd;if(0<=C&&C<F&&F<=B.length){if(0<C&&x.domObject().appendChild(document.createTextNode(B.slice(0,C))),x.child("b",{},B.slice(C,F)),F<B.length){x.domObject().appendChild(document.createTextNode(B.slice(F)));var J=/^[a-zA-Z_$0-9\/\.]+/.exec(B.slice(F));J&&(h.domObject().dataset.completion=J[0],h.domObject().dataset.suffix=B.slice(C,F))}}else x.setText(B);p.description&&x.domObject().appendChild(document.createTextNode(p.description));
h=h.child("div",{className:"di-kd-suggestionsPath"});p.isCitc&&(h=h.child("span",{className:"di-kd-suggestionsCitc"}));h.domObject().appendChild(document.createTextNode(p.path))},setCompletions:function(h){for(var p=b.dom.childElements(this._suggestionsElement),x=0;x<p.length;x++)p[x].classList.remove("active");this._activeCompletion&&this.removeAutoCompletionText();this._activeCompletion=null;if(p=this._suggestionsElement){for(;p.firstChild;)p.removeChild(p.firstChild);for(x=0;x<h.length;x++){var B=
h[x],C=b.ui.createElement("li",{className:"di-kd-suggestionslistitem"});"string"===typeof B?C.setText(B):(this.createSuggestionElement(C,B),0!=x||w||this.setAutoCompletionFromSuggestion(C.domObject()));p.appendChild(C.domObject())}}},onContextScroll:function(h){a.onContextScroll&&window.setTimeout(function(){a.onContextScroll(h)},0)},onQueryChange:function(h){var p=this,x=a.onQueryChange;x&&window.setTimeout(function(){x(p._searchFieldElement.value,h)},0)},_init:function(){var h=this;this._searchFieldElement.addEventListener("keydown",
function(p){switch(p.keyCode){case 9:if(h.onComplete())break;return;case 13:h.onSearch(h._activeCompletion);break;case 39:var x=h._searchFieldElement;if(x.selectionStart==x.value.length&&h.onComplete())break;return;case 27:h.setCompletions([]);break;case 38:if(0==h._suggestionsElement.children.length&&(p.ctrlKey||p.metaKey)){h.onContextScroll(!1);break}h._activeCompletion?(h._activeCompletion.classList.remove("active"),h._activeCompletion=h._activeCompletion.previousElementSibling):h._activeCompletion=
h._suggestionsElement.lastElementChild;h._activeCompletion&&h._activeCompletion.classList.add("active");h.setAutoCompletionFromSuggestion(h._activeCompletion);break;case 40:if(0==h._suggestionsElement.children.length){if(p.ctrlKey||p.metaKey)h.onContextScroll(!0);else h.onQueryChange(!0);break}h._activeCompletion?(h._activeCompletion.classList.remove("active"),h._activeCompletion=h._activeCompletion.nextElementSibling):h._activeCompletion=h._suggestionsElement.firstElementChild;h._activeCompletion&&
h._activeCompletion.classList.add("active");h.setAutoCompletionFromSuggestion(h._activeCompletion);break;default:h.onQueryChange(!1);return}p.stopPropagation();p.preventDefault()},!1);this._searchFieldElement.addEventListener("paste",function(){var p=h._searchFieldElement.value;window.setTimeout(function(){if(p!=h._searchFieldElement.value)h.onQueryChange(!1)},1)},!1);this._searchFieldElement.addEventListener("cut",function(){var p=h._searchFieldElement.value;window.setTimeout(function(){if(p!=h._searchFieldElement.value)h.onQueryChange(!1)},
1)},!1);this._suggestionsElement.addEventListener("mouseover",function(p){h.deselect();for(p=p.target;p&&"LI"!==p.tagName;)p=p.parentNode;p&&(p.classList.add("active"),h._activeCompletion=null);h.setAutoCompletionFromSuggestion(h._activeCompletion)},!1);this._suggestionsElement.addEventListener("mousedown",function(p){h.deselect();h.removeAutoCompletionText();for(p=p.target;p&&"LI"!==p.tagName;)p=p.parentNode;if(p)h.onSearch(p)},!1)}};l._init();a.searchHelp&&(c=c.child("span",{className:"di-kd-search-actions"}),
c=c.child("img",{src:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTRweCIgaGVpZ2h0PSIxNHB4IiB2aWV3Qm94PSIwIDAgMTQgMTQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iSGVscC1pY29uIiBmaWxsLXJ1bGU9Im5vbnplcm8iIGZpbGw9IiM2RDZENkQiPgogICAgICAgICAgICA8cGF0aCBkPSJNNywwIEMzLjEzNiwwIDAsMy4xMzYgMCw3IEMwLDEwLjg2NCAzLjEzNiwxNCA3LDE0IEMxMC44NjQsMTQgMTQsMTAuODY0IDE0LDcgQzE0LDMuMTM2IDEwLjg2NCwwIDcsMCBaIE03LjcsMTEuOSBMNi4zLDExLjkgTDYuMywxMC41IEw3LjcsMTAuNSBMNy43LDExLjkgWiBNOS4xNDksNi40NzUgTDguNTE5LDcuMTE5IEM4LjAxNSw3LjYzIDcuNyw4LjA1IDcuNyw5LjEgTDYuMyw5LjEgTDYuMyw4Ljc1IEM2LjMsNy45OCA2LjYxNSw3LjI4IDcuMTE5LDYuNzY5IEw3Ljk4Nyw1Ljg4NyBDOC4yNDYsNS42MzUgOC40LDUuMjg1IDguNCw0LjkgQzguNCw0LjEzIDcuNzcsMy41IDcsMy41IEM2LjIzLDMuNSA1LjYsNC4xMyA1LjYsNC45IEw0LjIsNC45IEM0LjIsMy4zNTMgNS40NTMsMi4xIDcsMi4xIEM4LjU0NywyLjEgOS44LDMuMzUzIDkuOCw0LjkgQzkuOCw1LjUxNiA5LjU0OCw2LjA3NiA5LjE0OSw2LjQ3NSBaIiBpZD0iU2hhcGUiPjwvcGF0aD4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPgo=",
alt:"help for query language",title:"Query language help",width:12,height:12}),c.domObject().addEventListener("click",function(){window.open(a.searchHelp)},!1));return l},e=function(a,c){var l={};var m="string"===typeof a.home?c.child("a",{href:a.home}):c;m=m.child("img",{className:"di-logo",id:"di-logo",src:a.logo.url,srcset:a.logo.srcset,alt:"Logo",width:a.logo.width,height:a.logo.height,style:{marginLeft:(a.logo.marginLeft||"14")+"px",position:"absolute",top:a.logo.top?a.logo.top+"px":0}});"function"==
typeof a.onLogo&&m.domObject().addEventListener("click",a.onLogo,!1);if(a.onSearch){m=c.child("div",{id:"di-kd-search"});var q=m.child("div",{style:{position:"absolute",left:"0",right:"72px",top:"0",bottom:"0"}});l.searchBox=d(a,q);q=m.child("a",{className:"di-kd-button di-kd-button-submit",id:"di-kd-searchbutton",tabindex:"0",style:{"-webkit-user-select":"none"}});q.domObject().addEventListener("click",function(){l.searchBox.onSearch(null)},!1);q.child("img",{src:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNS4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAgLS0+DQo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiIFsNCgk8IUVOVElUWSBuc19mbG93cyAiaHR0cDovL25zLmFkb2JlLmNvbS9GbG93cy8xLjAvIj4NCl0+DQo8c3ZnIHZlcnNpb249IjEuMSINCgkgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeG1sbnM6YT0iaHR0cDovL25zLmFkb2JlLmNvbS9BZG9iZVNWR1ZpZXdlckV4dGVuc2lvbnMvMy4wLyINCgkgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIyMXB4IiBoZWlnaHQ9IjIxcHgiIHZpZXdCb3g9IjAgMCAyMSAyMSIgb3ZlcmZsb3c9InZpc2libGUiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDIxIDIxIg0KCSB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxkZWZzPg0KPC9kZWZzPg0KPHBhdGggZmlsbD0iI0ZGRkZGRiIgZD0iTTE3LjY0NiwxNi41MDFMMTQsMTIuODU1YzAuNTY2LTAuODExLDAuOTAzLTEuNzkyLDAuOTAzLTIuODU1YzAtMi43NjItMi4yMzgtNS01LTVjLTIuNzYxLDAtNSwyLjIzOC01LDUNCglzMi4yMzksNSw1LDVjMS4wNjQsMCwyLjA0NS0wLjMzNywyLjg1Ni0wLjkwM2wzLjY0NiwzLjY0NmMwLjM0MywwLjM0MywwLjg5OCwwLjM0NCwxLjI0MSwwLjAwMQ0KCUMxNy45OSwxNy4zOTksMTcuOTksMTYuODQ1LDE3LjY0NiwxNi41MDF6IE05LjkwMywxMy4yYy0xLjc2NywwLTMuMTk5LTEuNDMzLTMuMTk5LTMuMnMxLjQzMy0zLjIsMy4xOTktMy4yDQoJYzEuNzcsMCwzLjE5OSwxLjQzMywzLjE5OSwzLjJTMTEuNjczLDEzLjIsOS45MDMsMTMuMnoiLz4NCjxyZWN0IG9wYWNpdHk9IjAiIGZpbGw9IiM0Mzg3RkQiIHdpZHRoPSIyMSIgaGVpZ2h0PSIyMSIvPg0KPC9zdmc+DQo=",
width:21,height:21,alt:"Search",style:{marginTop:(a.iconMarginTop||2)+"px"}});m=m.child("div",{className:"di-kd-extra-div"});l.extraDiv=m.domObject();a.advancedSearchUrl&&m.child("a",{href:a.advancedSearchUrl,style:{marginLeft:"10px"}},"Advanced Search");a=c.child("div",{className:"di-kd-butterbar"});a=a.child("p",{},"");l.butterbarMessage=a.domObject()}return l},k=function(a,c,l,m){c&&a.child("li",{className:"di-kd-menulistitem",style:{"-webkit-user-select":"none"}}).child("a",{href:c,target:m?"_self":
"_blank"},l)},n=function(a,c,l){l=l.child(c?"a":"span",{title:"Settings",className:(c?"topBar ":"di-kd-button ")+"di-kd-menubutton",tabIndex:0,style:{"-webkit-user-select":"none"}});c?l.children([b.ui.createElement("div",{className:"settingsImage"})]):l.children([b.ui.createElement("img",{src:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNS4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAgLS0+DQo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiIFsNCgk8IUVOVElUWSBuc19mbG93cyAiaHR0cDovL25zLmFkb2JlLmNvbS9GbG93cy8xLjAvIj4NCl0+DQo8c3ZnIHZlcnNpb249IjEuMSINCgkgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeG1sbnM6YT0iaHR0cDovL25zLmFkb2JlLmNvbS9BZG9iZVNWR1ZpZXdlckV4dGVuc2lvbnMvMy4wLyINCgkgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIyMXB4IiBoZWlnaHQ9IjIxcHgiIHZpZXdCb3g9IjAgMCAyMSAyMSIgb3ZlcmZsb3c9InZpc2libGUiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDIxIDIxIg0KCSB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxkZWZzPg0KPC9kZWZzPg0KPHBhdGggZD0iTTE2Ljg5NSwxMS42NEMxNi45NiwxMS4yNjksMTcsMTAuODksMTcsMTAuNXMtMC4wNC0wLjc3LTAuMTA2LTEuMTRsMS41MzUtMS4xMjlsMC4xODMtMC42ODNsLTEuNS0yLjU5OGwtMC42ODQtMC4xODQNCglsLTEuNzM4LDAuNzYyYy0wLjU4MS0wLjQ5LTEuMjUtMC44NzUtMS45NzktMS4xMzhMMTIuNSwyLjVMMTIsMkg5TDguNSwyLjQ5OUw4LjI5LDQuMzk1QzcuNTYyLDQuNjU4LDYuODk2LDUuMDQzLDYuMzE0LDUuNTMxDQoJTDQuNTcxLDQuNzY4TDMuODg5LDQuOTUxbC0xLjUsMi41OThsMC4xODMsMC42ODRsMS41MzUsMS4xMjlDNC4wNCw5LjczMSw0LDEwLjExMSw0LDEwLjVzMC4wNCwwLjc2OSwwLjEwNiwxLjEzOWwtMS41MzUsMS4xMjkNCglsLTAuMTgzLDAuNjg0bDEuNSwyLjU5OGwwLjY4MiwwLjE4NGwxLjc0NC0wLjc2NGMwLjU4LDAuNDg4LDEuMjQ4LDAuODczLDEuOTc1LDEuMTM3bDAuMjEsMS44OTZMOSwxOWgzbDAuNS0wLjVsMC4yMS0xLjg5Mg0KCWMwLjcyOS0wLjI2MywxLjM5OC0wLjY0OCwxLjk3OS0xLjEzOGwxLjczOCwwLjc2MmwwLjY4NC0wLjE4NGwxLjQ5OS0yLjU5OGwtMC4xODEtMC42ODNMMTYuODk1LDExLjY0eiBNMTQuMTUsMTAuNQ0KCWMwLDIuMDE2LTEuNjM1LDMuNjUtMy42NSwzLjY1Yy0yLjAxNiwwLTMuNjUtMS42MzUtMy42NS0zLjY1czEuNjM1LTMuNjUsMy42NS0zLjY1QzEyLjUxNSw2Ljg1LDE0LjE1LDguNDg0LDE0LjE1LDEwLjV6Ii8+DQo8cmVjdCBvcGFjaXR5PSIwIiBmaWxsPSIjNDM4N0ZEIiB3aWR0aD0iMjEiIGhlaWdodD0iMjEiLz4NCjwvc3ZnPg0K",
alt:"Settings",width:"21",height:"21",style:{marginTop:(a.iconMarginTop||2)+"px"}}),b.ui.createElement("span",{className:"di-kd-disclosureindicator"})]);c=l.child("ul",{className:"di-kd-menulist",style:{top:c?"17px":"27px",marginLeft:"-99px"}});k(c,a.customLinkUrl,a.customLinkText);k(c,a.faqUrl,"FAQ");k(c,a.newsUrl,"What's New");k(c,a.helpUrl,"Help");a.buganizerArgs&&k(c,"http://b/createIssue?"+a.buganizerArgs,"Report a Bug");if(a.onFeedback){l=c.child("li",{className:"di-kd-menulistitem",style:{"-webkit-user-select":"none"}});
var m=a.feedbackText||"Send Feedback";l.child("span",{},m);l.domObject().addEventListener("click",function(){a.onFeedback()},!1)}a.onSettings&&(l=c.child("li",{className:"di-kd-menulistitem",style:{"-webkit-user-select":"none"}}),l.child("span",{},"Settings"),l.domObject().addEventListener("click",function(){a.onSettings()},!1));a.onShortcuts&&(l=c.child("li",{className:"di-kd-menulistitem",style:{"-webkit-user-select":"none"}}),l.child("span",{},"Keyboard Shortcuts"),l.domObject().addEventListener("click",
function(){a.onShortcuts()},!1));k(c,a.contactUrl,a.contactText||"Contact");a.loggedInUser&&k(c,a.signoutUrl||"https://login.corp.google.com/logout","Sign Out "+a.loggedInUser,!0);new b.dom.KDMenu(c.domObject(),"settings")},t=function(a,c){a=a.child("div",{id:"di-kd-topBar"});c=c.toolName||"";a.children([b.ui.createElement("a",{href:"https://cs.corp.google.com/",target:"_blank",className:"codesearch"===c?"current":""},"Code Search"),b.ui.createElement("a",{href:"https://cr.corp.google.com/",target:"_blank",
className:"critique"===c?"current":""},"Critique"),b.ui.createElement("a",{href:"https://test.corp.google.com/",target:"_blank",className:"tap"===c?"current":""},"TAP"),b.ui.createElement("a",{href:"https://sponge2.corp.google.com/",target:"_blank",className:"sponge"===c?"current":""},"Sponge"),b.ui.createElement("a",{href:"https://b.corp.google.com/",target:"_blank",className:"buganizer"===c?"current":""},"Buganizer"),b.ui.createElement("a",{href:"https://ds.corp.google.com/",target:"_blank",className:"datasearch"===
c?"current":""},"Data Search"),b.ui.createElement("a",{href:"https://rapid.corp.google.com/",target:"_blank",className:"rapid"===c?"current":""},"Rapid"),b.ui.createElement("a",{href:"https://sigma.corp.google.com/",target:"_blank",className:"sigma"===c?"current":""},"Sigma"),b.ui.createElement("a",{href:"https://yaqs.googleplex.com/",target:"_blank",className:"yaqs"===c?"current":""},"YAQS")]);a.domObject().addEventListener("click",function(l){"A"===l.target.tagName&&b.xhr.logEvent("onBarClick",
l.target.innerText,b.currentContext_)},!0);return a},u=function(a,c){var l=b.ui.createElement("div",{id:"di-kd-completebar"}),m={menuCount:0,extraDiv:null,suggestions:null},q=!c.noTopBar;if(c.topBarOnly&&q)q=t(l,c),q=q.child("div",{className:"topBarMenus"}),n(c,!0,q);else if(!c.topBarOnly||q){q&&t(l,c);q=l.child("div",{id:"di-kd-googlebar"});var w=e(c,q);m.extraDiv=w.extraDiv;m.searchBox=w.searchBox;m.butterbarMessage=w.butterbarMessage;q=q.child("div",{id:"di-kd-menus",className:"di-kd-buttonbar right"});
w=q.child("span",{className:"di-kd-segmentedcontrol"});var r,g=c,v=[];if(g.client){var f=g.client.match(/citc_(.*)-([0-9]+)_Piper/),z=g.client.match(/([^:]+):([^:]+):([0-9]+):citc/);f?r=f[1]+"/"+f[2]:z&&(r=z[1]+"/"+z[3])}var A;if(g.filePath){f={};z=g.filePath;var G=-1!=z.indexOf("/",z.length-1);0===z.indexOf("//depot/google3/")?A=z.substring(16):0!==z.indexOf("/")&&(A=z);if(A){z="//depot/google3/"+A;var D="https://cs.corp.google.com/piper/"+z;f["default"]=D;"codesearch"!==g.toolName&&(f["Show in Code Search"]=
D);if(!G){var y;r?y="workspaceId="+r:"critique"!==g.toolName&&(y="forceNew=true");y&&(f["Edit in Cider"]="https://cider.corp.google.com/?"+y+"&files=//depot/google3/"+A);f["Show blame in Code Search"]="https://cs.corp.google.com/piper/"+z+"?flo=BLAME";f["Containing build targets"]="https://deps.corp.google.com/find?direct=true&reverse=true&file="+A}}else D="https://cs.corp.google.com/piper/"+z,f["default"]=D,"codesearch"!==g.toolName&&(f["Show in Code Search"]=D),G||(f["Show blame in Code Search"]=
D+"&flo=BLAME");v.push({label:"File",kind:"filePath","default":D,items:f})}g.target&&(y=g.target.match(/(.*):([^:]+)$/))&&(f={"BUILD rule definition":"https://cs.corp.google.com/"+y[1].replace("//","google3/")+"/BUILD?q=case:yes%20"+y[2],"Blaze runs":"https://fusion2.corp.google.com/invocations;query=target:"+g.target,Dependencies:"https://deps.corp.google.com/find?direct=false&reverse=false&target="+g.target},v.push({label:"Target",kind:"target","default":"https://cs.corp.google.com/"+y[1].replace("//",
"google3/")+"/BUILD",items:f}));g.cl&&(f={"Show in Critique":"https://critique.corp.google.com/"+g.cl,"Show in CL search":"https://cs.corp.google.com/search/?q=cl:"+g.cl+"&type=cl","Show in TAP":"https://test.corp.google.com/ui#cl="+g.cl,"Associated Bug(s)":"https://b.corp.google.com/issues?q=cl:"+g.cl},r&&(y="",A&&(y="&files=//depot/google3/"+A),f["Open in Cider"]="https://cider.corp.google.com/?workspaceId="+r+y),v.push({label:"Changelist",kind:"cl","default":"https://critique.corp.google.com/"+
g.cl,items:f}));g.bug&&(f={"Show in Buganizer":"https://b.corp.google.com/"+g.bug,"Related CLs":"https://cs.corp.google.com/search/?q=bug:"+g.bug+"&type=cl"},v.push({label:"Issue",kind:"bug","default":"https://b.corp.google.com/"+g.bug,items:f}));g.project&&(y="https://test.corp.google.com/ui#p="+g.project,f={"TAP Grid":y+"&d=grid2",Coverage:y+"&d=coverage",Health:y+"&d=health",Definition:y+"&d=projectInfo",Postmortems:"https://roundup.corp.google.com/index.html#search;pr="+g.project},v.push({label:"Project",
kind:"project","default":y+"&d=grid2",items:f}));g.client&&(f={"Show in Critique":"https://cr.corp.google.com/#client/&cn="+g.client,"Blaze runs":"https://fusion2.corp.google.com/invocations;query=client%3A"+g.client},r&&(y=A||"",f["Open in Code Search"]="https://cs.corp.google.com/piper///depot/google3/"+y+"?ws="+r,y="",A&&(y="&files=//depot/google3/"+A),f["Open in Cider"]="https://cider.corp.google.com/?workspaceId="+r+y),v.push({label:"Client",kind:"client","default":"https://cr.corp.google.com/#client/&cn="+
g.client,items:f}));g.user&&(f={"Show in Teams":"https://teams.googleplex.com/u/"+g.user,Bugs:"https://b.corp.google.com/simplifiedSearchResults?query=owner%3A"+g.user,"CL dashboard":"https://cr.corp.google.com/#/&u="+g.user,Groups:"https://ganpati.corp.google.com/#User_Info?name="+g.user,"TAP dashboard":"https://test.corp.google.com/ui#u="+g.user,"Blaze runs":"https://fusion2.corp.google.com/invocations;query=user%3A"+g.user,Memes:"https://memegen.googleplex.com/ldap?ldap="+g.user},v.push({label:"User",
kind:"user","default":"https://teams.googleplex.com/u/"+g.user,items:f}));r=v;for(A=0;A<r.length&&3>A;A++){m.menuCount++;z=0===A?"left":A===r.length-1||2===A?"right":"mid";g=void 0;v=r[A];f=v.label;y=v.items;z=w.child("span",{className:"di-kd-button di-kd-menubutton "+z,tabIndex:0,style:{"-webkit-user-select":"none",minWidth:"60px",maxWidth:"110px",whiteSpace:"nowrap"}});z.children([b.ui.createElement("span",{className:"di-kd-disclosureindicator"}),b.ui.createElement("span",{title:f,style:{textOverflow:"ellipsis",
display:"inline-block",maxWidth:"98px",overflow:"hidden"}},f)]);f=z.child("ul",{className:"di-kd-menulist",style:{top:"27px"}});for(g in y)y.hasOwnProperty(g)&&"default"!==g&&f.child("li",{className:"di-kd-menulistitem",style:{"-webkit-user-select":"none"}}).child("a",{href:y[g],target:"_blank"},g);new b.dom.KDMenu(f.domObject(),v.kind)}n(c,!1,q.child("span",{className:"di-kd-segmentedcontrol"}))}m.sandbar=l.domObject();for(c=m;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(c.sandbar);return c},
E=function(a){var c=/^(\/|https?:\/\/|mailto:|data:image\/(png|gif);base64,)[^<>"'{}]+$/,l=/^[a-zA-Z0-9\-_ ,:]+$/,m=/^[&a-zA-Z0-9\-_ ,:]+$/,q=/^[a-zA-Z0-9\-_\/\.:]+$/,w=/^[a-zA-Z0-9\/#&=\-_\.]+$/,r=/^.+$/,g=/^[a-zA-Z0-9\-_\/\.:@ ]+$/,v={},f=b.util.validateAndCopy;f(a.logo,v,"url",c);f(a.logo,v,"srcset",g);f(a.logo,v,"width",l);f(a.logo,v,"height",l);f(a.logo,v,"top",l);f(a.logo,v,"marginLeft",l);g={logo:v};f(a,g,"home",w);f(a,g,"topBarOnly",l);f(a,g,"noTopBar",l);f(a,g,"forcedSandbarHeight",l);f(a,
g,"iconMarginTop",l);f(a,g,"onSearch",null);f(a,g,"onQueryChange",null);f(a,g,"onQueryHighlight",null);f(a,g,"onSuggestionSelected",null);f(a,g,"onContextScroll",null);f(a,g,"searchPlaceholder",l);f(a,g,"searchValue",r);f(a,g,"searchHelp",c);f(a,g,"advancedSearchUrl",c);f(a,g,"toolName",l);f(a,g,"filePath",q);f(a,g,"target",q);f(a,g,"client",l);f(a,g,"cl",l);f(a,g,"bug",l);f(a,g,"project",l);f(a,g,"user",l);f(a,g,"loggedInUser",l);f(a,g,"faqUrl",c);f(a,g,"newsUrl",c);f(a,g,"onFeedback",null);f(a,
g,"feedbackText",l);f(a,g,"onSettings",null);f(a,g,"onShortcuts",null);f(a,g,"onLogo",null);f(a,g,"getHovercardActions",null);f(a,g,"buganizerArgs",w);f(a,g,"helpUrl",c);f(a,g,"contactUrl",c);f(a,g,"contactText",m);f(a,g,"customLinkUrl",c);f(a,g,"customLinkText",m);f(a,g,"signoutUrl",c);return g};b.targetDiv_=null;b.searchBox_=null;b.butterbarMessage_=null;b.height_=102;b.currentContext_={};b.logContextTimeout_=null;b.optInFeatures_=[];b.getHovercardActions=null;b.init=function(a){if(!document.body)throw"devInfSandbar() called too early - move the invocation to a script tag within the body";
a&&(this.targetDiv_=a);this.optedIn_("hovercards")&&(a=new window.corpeng.hover.HovercardManager,a.setTargetClass("di-hover"),a.setFillPopup(function(c,l){var m=b.getHovercardActions&&b.getHovercardActions(l);b.xhr.logEvent("hover",null,l.dataset);l.dataset.cl?(m=l.dataset.cl,b.ui.fillCLHover(c,m)):l.dataset.issue?(m=l.dataset.issue,b.ui.fillIssueHover(c,m)):l.dataset.ldap?(l=l.dataset.ldap,b.ui.fillLdapHover(c,l,m)):c.innerText="Unknown Hover Kind. Must specify a data-cl, data-issue, or data-ldap attribute"}),
a.install());this.targetDiv_||(this.targetDiv_=document.createElement("div"),document.body.insertBefore(this.targetDiv_,document.body.firstChild));this.targetDiv_.classList.add("devInfSandbar");this.targetDiv_.style.padding="0";this.targetDiv_.style.width="auto";this.targetDiv_.style.minWidth="1100px";this.targetDiv_.style.height="102px";this.targetDiv_.style.backgroundColor="#F1F1F1"};b.optIn=function(a){this.optInFeatures_=a};b.optedIn_=function(a){return-1!==this.optInFeatures_.indexOf(a)};b.update=
function(a){a=E(a);this.currentContext_={filePath:a.filePath,target:a.target,cl:a.cl,bug:a.bug,project:a.project,client:a.client,user:a.user,toolName:a.toolName,loggedInUser:a.loggedInUser};this.getHovercardActions=a.getHovercardActions||null;this.logContextTimeout_&&window.clearTimeout(this.logContextTimeout_);this.logContextTimeout_=window.setTimeout(function(){b.xhr.logEvent("contextUpdate","",window.devInfSandbar.currentContext_);window.devInfSandbar.logContextTimeout_=null},500);this.height_=
a.topBarOnly?30:102;a.noTopBar&&(this.height_-=30);a.forcedSandbarHeight&&(this.height_=a.forcedSandbarHeight);this.targetDiv_.style.height=this.height_+"px";a=u(this.targetDiv_,a);this.searchBox_=a.searchBox;this.butterbarMessage_=a.butterbarMessage;return{extraDiv:a.extraDiv}};b.getSearchBox=function(){return this.searchBox_};b.setSearchText=function(a){this.searchBox_&&this.searchBox_.setSearchText(a)};b.getSearchText=function(){return this.searchBox_?this.searchBox_.getSearchText():""};b.setCompletions=
function(a){this.searchBox_&&this.searchBox_.setCompletions(a)};b.showButterbar=function(a,c,l){var m=this.butterbarMessage_;if(m){for(;m.firstChild;)m.removeChild(m.firstChild);a=a||"";""!==a?(m.appendChild(document.createTextNode(a)),c&&(a=document.createElement("a"),a.href=l,a.appendChild(document.createTextNode(c)),m.appendChild(a)),m.parentNode.classList.add("shown"),window.setTimeout(function(){m.parentNode.classList.remove("shown")},5E3)):m.parentNode.classList.remove("shown")}};b.createSearchBox=
function(a,c){c=b.ui.wrapElement(c).child("div",{style:{position:"absolute",left:"0",right:"0",top:"0",bottom:"0"}});return d(a,c)};b.setSearchFocus=function(a){this.searchBox_&&this.searchBox_.setSearchFocus(a)};b.hasSearchFocus=function(){return this.searchBox_&&this.searchBox_.hasSearchFocus()};b.height=function(){return this.height_};b.closeMenus=function(){for(var a=document.getElementsByClassName("di-kd-menulist"),c=0;c<a.length;c++)a[c].classList.remove("shown"),a[c].parentNode.classList.remove("selected")}})(window.devInfSandbar);
